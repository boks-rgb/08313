<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë³´ì„ë™êµ´ ê·¸ë¦¼ì±… íƒí—˜ëŒ€</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#E0F7F1] min-h-screen p-6 text-sm">
  <!-- ìƒë‹¨ ì œëª© -->
  <div class="text-center mb-4">
    <h1 class="text-2xl font-bold text-[#007F6D] mb-2">&lt;ë³´ì„ë™êµ´&gt; ê·¸ë¦¼ì±… íƒí—˜ëŒ€</h1>
    <div id="bokMessage" class="mt-2 text-[#007F6D] font-semibold text-lg">
      ì•ˆë…•! ë‚˜ëŠ” ë³µë³µì´ì•¼ ğŸ’
    </div>
  </div>

  <!-- ë©”ë‰´ ë²„íŠ¼ -->
  <div class="flex flex-wrap justify-center gap-2 mb-4">
    <button id="toggleMenu" class="bg-sky-900 text-white rounded px-4 py-2">ë©”ë‰´ ìˆ¨ê¸°ê¸° ğŸ“˜</button>
    <button data-page="1" class="menu-btn bg-sky-900 text-white rounded px-4 py-2">1. ì–´ë–¤ ë³´ì„ë“¤ì´ ìˆì„ê¹Œìš”?</button>
    <button data-page="2" class="menu-btn bg-white border px-4 py-2 rounded">2. ë‚˜ì˜ ê°•ì  ë³´ì„</button>
    <button data-page="3" class="menu-btn bg-white border px-4 py-2 rounded">3. ë‚˜ì˜ í•„ìš” ë³´ì„</button>
    <button data-page="4" class="menu-btn bg-white border px-4 py-2 rounded">4. í™œë™ ë‹¤ì§</button>
  </div>

  <!-- ì»¨í…ì¸  ì˜ì—­ -->
  <div id="content" class="max-w-4xl mx-auto">
    <div id="gem-meaning" class="text-center text-sm bg-white rounded shadow-md p-4 mb-6 hidden"></div>
    <div id="gem-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 text-center mb-6"></div>
    <div id="extra-content" class="mb-6"></div>
  </div>

  <!-- í•˜ë‹¨ ê¸°ëŠ¥ ë²„íŠ¼ -->
  <div class="flex justify-center gap-2 mt-4 flex-wrap">
    <button id="saveNotes" class="bg-green-600 text-white px-4 py-2 rounded">ë©”ëª¨ ì €ì¥ ğŸ’¾</button>
    <button id="loadNotes" class="bg-indigo-600 text-white px-4 py-2 rounded">ë¶ˆëŸ¬ì˜¤ê¸° ğŸ“‚</button>
    <button id="shareLink" class="bg-pink-600 text-white px-4 py-2 rounded">ë§í¬ ë³µì‚¬ ğŸ”—</button>
  </div>

  <script>
  window.addEventListener("DOMContentLoaded", () => {
    let selectedPage = 1;
    let clickedGems = {1:[],2:[],3:[],4:[]};

    const gems = [
      ["ê°ì‚¬","ë°°ë ¤","ìœ ì—°ì„±","ì°½ì˜ì„±"],
      ["ê²°ì˜","ë´‰ì‚¬","ì´ìƒí’ˆê¸°","ì±…ì„ê°"],
      ["ê²¸ì†","ì‚¬ë‘","ì´í•´","ì²­ê²°"],
      ["ê´€ìš©","ì‚¬ë ¤","ì¸ë‚´","ì´ˆì—°"],
      ["ê·¼ë©´","ìƒëƒ¥í•¨","ì¸ì •","ì¶©ì§"],
      ["ê¸°ë»í•¨","ì†Œì‹ ","ììœ¨","ì¹œì ˆ"],
      ["ê¸°ì§€","ì‹ ë¢°","ì ˆë„","íƒì›”í•¨"],
      ["ëˆê¸°","ì‹ ìš©","ì •ëˆ","í‰ì˜¨í•¨"],
      ["ë„ˆê·¸ëŸ¬ì›€","ì—´ì •","ì •ì˜ë¡œì›€","í•œê²°ê°™ìŒ"],
      ["ë„ì›€","ì˜ˆì˜","ì •ì§","í—Œì‹ "],
      ["ëª…ì˜ˆ","ìš©ê¸°","ì¡´ì¤‘","í˜‘ë™"],
      ["ëª©ì ì˜ì‹","ìš©ì„œ","ì¤‘ìš©","í™”í•©"],
      ["ë¯¿ìŒì§í•¨","ìš°ì˜","ì§„ì‹¤í•¨","í™•ì‹ "]
    ];
    const ALL = [].concat(...gems);

    const meanings = {
      ê°ì‚¬:"ê³ ë§ˆìš´ ë§ˆìŒ", ë°°ë ¤:"ë‹¤ë¥¸ ì‚¬ëŒì„ ë¨¼ì € ìƒê°", ìœ ì—°ì„±:"ìƒí™©ì— ë”°ë¼ ì˜ ë°”ê¾¸ëŠ” í˜", ì°½ì˜ì„±:"ìƒˆë¡œìš´ ìƒê°ì„ ë– ì˜¬ë¦¼",
      ê²°ì˜:"ë§ˆìŒì„ ë‹¨ë‹¨íˆ ë¨¹ëŠ” ë‹¤ì§", ë´‰ì‚¬:"ë‹¤ë¥¸ ì‚¬ëŒì„ ë•ëŠ” í–‰ë™", ì´ìƒí’ˆê¸°:"ì¢‹ì€ ìƒê°ì„ ë– ì˜¬ë¦¬ëŠ” í˜", ì±…ì„ê°:"ë§¡ì€ ì¼ì„ ëê¹Œì§€ í•¨",
      ê²¸ì†:"ì˜í•´ë„ ìë‘í•˜ì§€ ì•ŠìŒ", ì‚¬ë‘:"ë§ˆìŒì„ ë‹¤í•´ ì•„ë¼ê³  ì¢‹ì•„í•¨", ì´í•´:"ë‹¤ë¥¸ ì‚¬ëŒ ê¸°ë¶„ì„ ì•Œì•„ì¤Œ", ì²­ê²°:"ê¹¨ë—í•˜ê²Œ í•˜ëŠ” ìŠµê´€",
      ê´€ìš©:"ë‹¤ë¥¸ ì‚¬ëŒ ì˜ëª»ì„ ë„“ê²Œ ë´ì¤Œ", ì‚¬ë ¤:"ê¹Šì´ ìƒê°í•˜ê³  í–‰ë™í•¨", ì¸ë‚´:"í˜ë“¤ì–´ë„ ì°¸ëŠ” í˜", ì´ˆì—°:"ë§ˆìŒì´ í”ë“¤ë¦¬ì§€ ì•Šê³  í¸ì•ˆí•¨",
      ê·¼ë©´:"ë¶€ì§€ëŸ°íˆ ì¼í•¨", ìƒëƒ¥í•¨:"ë¶€ë“œëŸ½ê³  ì¹œì ˆí•¨", ì¸ì •:"ë‹¤ë¥¸ ì‚¬ëŒì„ ì¢‹ê²Œ ìƒê°", ì¶©ì§:"ë¯¿ìŒì„ ì§€í‚¤ê³  ì„±ì‹¤í•¨",
      ê¸°ë»í•¨:"ì¦ê²ê³  í–‰ë³µí•œ ë§ˆìŒ", ì†Œì‹ :"ë‚´ ìƒê°ì„ ë¯¿ê³  ì§€í‚´", ììœ¨:"ìŠ¤ìŠ¤ë¡œ í•˜ëŠ” í˜", ì¹œì ˆ:"ë‹¤ì •í•˜ê²Œ ì˜ ëŒ€í•´ì¤Œ",
      ê¸°ì§€:"ì¬ì¹˜ ìˆê²Œ í•´ê²°í•¨", ì‹ ë¢°:"ë¯¿ê³  ì˜ì§€í•˜ëŠ” ë§ˆìŒ", ì ˆë„:"ì•Œë§ê²Œ ì¡°ì ˆí•¨", íƒì›”í•¨:"ì•„ì£¼ ì˜í•˜ëŠ” ëŠ¥ë ¥",
      ëˆê¸°:"ëê¹Œì§€ í¬ê¸°í•˜ì§€ ì•ŠìŒ", ì‹ ìš©:"ë¯¿ì„ ìˆ˜ ìˆëŠ” íƒœë„", ì •ëˆ:"ê¹”ë”í•˜ê²Œ ì •ë¦¬í•¨", í‰ì˜¨í•¨:"ë§ˆìŒì´ ì¡°ìš©í•˜ê³  í¸ì•ˆí•¨",
      ë„ˆê·¸ëŸ¬ì›€:"ì‘ì€ ì˜ëª»ì„ ì´í•´í•´ì¤Œ", ì—´ì •:"ë¬´ì—‡ì´ë“  í˜ì°¨ê²Œ í•¨", ì •ì˜ë¡œì›€:"ì˜³ê³  ë°”ë¥¸ ê²ƒì„ ì§€í‚´", í•œê²°ê°™ìŒ:"ì–¸ì œë‚˜ ë˜‘ê°™ì´ ì„±ì‹¤í•¨",
      ë„ì›€:"í•„ìš”í•œ ì‚¬ëŒì„ ê±°ë“¬", ì˜ˆì˜:"ë°”ë¥´ê²Œ ë§í•˜ê³  í–‰ë™", ì •ì§:"ê±°ì§“ë§í•˜ì§€ ì•ŠìŒ", í—Œì‹ :"ë§ˆìŒì„ ë‹¤í•´ ë„ì™€ì¤Œ",
      ëª…ì˜ˆ:"ë°”ë¥´ê²Œ ì‚´ì•„ ì–»ëŠ” ì¢‹ì€ ì´ë¦„", ìš©ê¸°:"ë¬´ì„­ê±°ë‚˜ ì–´ë ¤ì›Œë„ í•´ë´„", ì¡´ì¤‘:"ë‹¤ë¥¸ ì‚¬ëŒì„ ì†Œì¤‘íˆ ì—¬ê¹€", í˜‘ë™:"í˜ì„ í•©ì³ ê°™ì´ í•¨",
      ëª©ì ì˜ì‹:"ì™œ í•˜ëŠ”ì§€ ëšœë ·ì´ ì•", ìš©ì„œ:"ë‹¤ë¥¸ ì‚¬ëŒ ì˜ëª»ì„ í’€ì–´ì¤Œ", ì¤‘ìš©:"ì¹˜ìš°ì¹˜ì§€ ì•Šê³  ë°”ë¥´ê²Œ í•¨", í™”í•©:"ì„œë¡œ ì˜ ì–´ìš¸ë ¤ ì§€ëƒ„",
      ë¯¿ìŒì§í•¨:"ë¯¿ê³  ë§¡ê¸¸ ìˆ˜ ìˆìŒ", ìš°ì˜:"ì¹œêµ¬ì²˜ëŸ¼ ì¹œë°€í•¨", ì§„ì‹¤í•¨:"ê±°ì§“ ì—†ì´ ì°¸ë¨", í™•ì‹ :"ìì‹  ìˆê²Œ ë¯¿ìŒ"
    };

    const msgs = ["ë¹›ë‚˜ëŠ” ë§ˆìŒì´ ëŠê»´ì ¸ ğŸŒŸ","ì¢‹ì€ ì„ íƒì´ì•¼ ğŸ’","ë³µë³µì´ê°€ ì‘ì›í•´ ğŸ‘"];
    const say = t => document.getElementById("bokMessage").textContent = t;

    // ë³´ì„ ì¶œë ¥
    function renderGems(){
      const list = document.getElementById("gem-list");
      const card = document.getElementById("gem-meaning");
      list.innerHTML = "";
      ALL.forEach(word => {
        const btn = document.createElement("div");
        btn.textContent = word;
        btn.className = "cursor-pointer py-2 rounded shadow hover:bg-blue-100 " +
          (clickedGems[selectedPage].includes(word) ? "bg-pink-300 text-white" : "bg-white");
        btn.onclick = () => {
          if(!clickedGems[selectedPage].includes(word)) clickedGems[selectedPage].push(word);

          let placeholder = "ìƒê°ì„ ì ì–´ë³´ì„¸ìš” âœï¸";
          if (selectedPage === 2) placeholder = "ë‚´ê°€ ì˜í•˜ëŠ” ë³´ì„ 2ê°œë¥¼ ê³¨ë¼ ì´ìœ ë¥¼ ì¨ë³´ì„¸ìš” âœï¸";
          if (selectedPage === 3) placeholder = "ì§€ê¸ˆ ë‚˜ì—ê²Œ í•„ìš”í•œ ë³´ì„ 2ê°œë¥¼ ê³¨ë¼ ì´ìœ ë¥¼ ì¨ë³´ì„¸ìš” âœï¸";
          if (selectedPage === 4) placeholder = "ì˜¤ëŠ˜ì˜ ë‹¤ì§ì„ ì¨ë³´ì„¸ìš” âœï¸";

          card.innerHTML = `
            <div class='text-2xl mb-1'>ğŸ’</div>
            <div class='font-bold'>${word}</div>
            <div class='mb-2'>${meanings[word]}</div>
            <textarea id='note-${word}' class='w-full border rounded p-2 text-sm'
              placeholder='${placeholder}'>${localStorage.getItem("note_"+word)||""}</textarea>`;
          card.classList.remove("hidden");
          say(msgs[Math.floor(Math.random()*msgs.length)]);
          renderGems();
        };
        list.appendChild(btn);
      });
    }

    // ì¶”ê°€ ì„¤ëª…
    function renderExtra(){
      const ex = document.getElementById("extra-content"); ex.innerHTML = "";
      if(selectedPage===2) ex.innerHTML="<h2 class='text-lg font-semibold mb-2'>ë‚´ê°€ ì˜í•˜ëŠ” ë³´ì„ 2ê°œë¥¼ ê³¨ë¼ ì´ìœ ë¥¼ ì¨ë³´ì„¸ìš”.</h2>";
      if(selectedPage===3) ex.innerHTML="<h2 class='text-lg font-semibold mb-2'>ì§€ê¸ˆ ë‚˜ì—ê²Œ í•„ìš”í•œ ë³´ì„ 2ê°œë¥¼ ê³¨ë¼ ì´ìœ ë¥¼ ì¨ë³´ì„¸ìš”.</h2>";
      if(selectedPage===4) ex.innerHTML="<h2 class='text-lg font-semibold mb-2'>ì˜¤ëŠ˜ì˜ ë‹¤ì§ì„ ì¨ë³´ì„¸ìš”.</h2>";
    }

    // ë©”ë‰´ ì „í™˜
    document.querySelectorAll(".menu-btn").forEach(btn=>{
      btn.onclick=()=>{
        selectedPage=parseInt(btn.dataset.page,10);
        document.querySelectorAll(".menu-btn").forEach(b=>b.classList.remove("bg-sky-900","text-white"));
        btn.classList.add("bg-sky-900","text-white");
        renderGems(); renderExtra();
      };
    });

    // ë©”ë‰´ ìˆ¨ê¸°ê¸°
    document.getElementById("toggleMenu").onclick=()=>{
      const bs=document.querySelectorAll(".menu-btn");
      const v=bs[0].style.display!=="none";
      bs.forEach(b=>b.style.display=v?"none":"inline-block");
      document.getElementById("toggleMenu").textContent=v?"ë©”ë‰´ ë³´ì´ê¸° ğŸ“˜":"ë©”ë‰´ ìˆ¨ê¸°ê¸° ğŸ“˜";
    };

    // ë©”ëª¨ ì €ì¥
    document.getElementById("saveNotes").onclick=()=>{
      ALL.forEach(word=>{
        const note=document.getElementById("note-"+word);
        if(note) localStorage.setItem("note_"+word,note.value);
      });
      alert("ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ’¾");
    };

    // ë©”ëª¨ ë¶ˆëŸ¬ì˜¤ê¸°
    document.getElementById("loadNotes").onclick=()=>{
      ALL.forEach(word=>{
        const saved=localStorage.getItem("note_"+word);
        if(saved){
          const note=document.getElementById("note-"+word);
          if(note) note.value=saved;
        }
      });
      alert("ì €ì¥ëœ ë©”ëª¨ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤ ğŸ“‚");
    };

    // ë§í¬ ê³µìœ 
    document.getElementById("shareLink").onclick=()=>{
      let data={};
      ALL.forEach(word=>{
        const val=localStorage.getItem("note_"+word);
        if(val) data[word]=val;
      });
      const encoded=encodeURIComponent(JSON.stringify(data));
      const url=location.origin+location.pathname+"?data="+encoded;
      navigator.clipboard.writeText(url).then(()=>alert("ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ”—"));
    };

    // URL ë°ì´í„° ë³µì›
    const params=new URLSearchParams(location.search);
    if(params.has("data")){
      try{
        const data=JSON.parse(decodeURIComponent(params.get("data")));
        Object.keys(data).forEach(word=>localStorage.setItem("note_"+word,data[word]));
      }catch(e){console.error(e);}
    }

    // ì´ˆê¸° ì‹¤í–‰
    renderGems(); renderExtra();
  });
  </script>
</body>
</html>
